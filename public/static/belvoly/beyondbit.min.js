/*!
 * Beyondbit Front-end Framework v4.0.0
 changeset 180112 *
 * http://bsdn.beyondbit.com
 *
 * Copyright (c) 2020 xakoy
 * Released under the  license
 */

var Beyondbit=function(){var that={registerNameSpace:function(e){for(var t=that,n=e.split("."),a=n.length,i=0;i<a;i++){var o=n[i];t[o]===undefined&&(t[o]={}),t=t[o]}return t},register:function(e,t){for(var n=e.split("."),a=that,i=0,o=n.length;i<o;i+=1){if(i==o-1)return a[n[i]]!==undefined?a[n[i]]=$.extend({},a[n[i]],t(that)):a[n[i]]=t(that),!0;a[n[i]]===undefined&&(a[n[i]]={}),a=a[n[i]]}},regShort:function(e,t){if(that[e]!==undefined)throw"["+e+"] : short : 已经注册";that[e]=t},isObjectExists:function(objectString){try{return eval("var tempObjetExists = "+objectString),!0}catch(e){}return!1},DESIGNATION:"belvoly"},_identity=1;return that.getIdentity=function(){return _identity++},that.log=function(e){window.console&&window.console.log(e)},that}(),B=window.B=window.Beyondbit=Beyondbit;B.Config={webRootUrl:"/",sharedServiceRootUrl:"",position:{url:"/Position/Select"},iam:{clientId:"",clientSecret:"",token:"",refreshToken:"",refreshTokenUrl:"",enabled:!0}},B.getEntireUrl=function(e){return B.Config.webRootUrl&&B.Config.webRootUrl.length<=1?e:B.Config.webRootUrl+e},B.config=function(e){if(!e)return B.Config;B.Config=$.extend(!0,{},B.Config,e)},window.B_config&&B.config(window.B_config),function(t){Array.indexOf=function(e,n){var a=-1;return t.each(e,function(e,t){if(t===n)return a=e,!1}),a},Array.indexFun=function(e,n){var a=-1;return t.each(e,function(e,t){if(1==n(t))return a=e,!1}),a}}(jQuery),function(l,c){var e=c.registerNameSpace("jQueryEx.Ajax");function d(){return e.regional[c.CultureInfo.Current.get()]}e.regional=[],e.regional[""]=e.regional["zh-CN"]={message:{title:"系统提示",actionName:"操作"},close:"关闭",ok:"确定",success:"{0} 成功！",loading:"正在{0}中..."},c.post=function(e,t,n,a){return c.ajax({type:"POST",url:e,data:t,success:n,dataType:a})},c.ajax=function(e){var t=l.extend(!0,d().message,e.message),n=l.extend(!0,{enabled:!0,onShowing:function(){c.Web.MessageBox.loading(a,d().loading.bformat(t.actionName))},onClosing:function(){c.Web.MessageBox.loading(!1)}},{},e.loading),a=t.title,i=e.regulate,o=e.beforeSend;o&&(e.beforeSend=function(e){var t=o();return 0==t&&n.enabled&&n.onClosing(),t});var r=e.success;return e.success=function(e){(n.enabled&&n.onClosing(),0==e.Flag)?(c.Web.MessageBox.alert(a,e.Message,d().close,"ERROR"),null!=i&&i.disabled(!1).show()):1==r(e)&&c.Web.MessageBox.alert(a,d().success.bformat(t.actionName),d().ok,"SUCCESS")},n.enabled&&n.onShowing(),function s(t){var e=t.oAuth;if(e&&!0===e.enabled){t.data=t.data||{};var n=(t.type||"get").toUpperCase();if("POST"==n){var a=t.url;t.url=c.getEntireUrl("/AjaxCrossDomain/Post"),t.data=t.data||{},t.data.rawUrl=a}var i=c.config();t.data.client_id=i.iam.clientId,t.data.client_secret=i.iam.clientSecret,t.data.access_token=i.iam.token;var o=t.success;t.success=function(e){0==e.Flag&&"expired_token"==e.Message?l.ajax({type:"POST",url:i.iam.refreshTokenUrl,data:{grant_type:"refresh_token",client_id:i.iam.clientId,client_secret:i.iam.clientSecret,refresh_token:i.iam.refreshToken},success:function(e){e.error_code?(alert("获取 Token 异常"+e.error_message),c.Web.MessageBox.loading(!1)):(c.config({iam:{token:e.access_token,refreshToken:e.refresh_token}}),s(t))}}):o(e)}}return l.ajax(t)}(e)},c.ajaxForOAuth=function(e){return e=l.extend(!0,{},{oAuth:{enabled:!0},type:"GET"},e),c.ajax(e)}}(jQuery,Beyondbit),function(e,n){n.regional=[],n.regional[""]=n.regional["zh-CN"]={prompt:"提示",del:"删除",data:"数据",someThingSaving:"{0}保存中..",confirmToDoSomeThing:"确定要{0}吗？"},n.registerNameSpace("CultureInfo").Current=new function(){var t="zh-CN";this.get=function(){return t},this.set=function(e){t=e},this.getCommonRegional=function(){return this.getRegional(n.regional)},this.getRegional=function(e){return e[this.get()]||e[""]}}}(jQuery,Beyondbit),function(g,p){var f={SINGLE:"single",MULTIPE:"multiple"},e=p.registerNameSpace("OPicker");function v(){return e.regional[p.CultureInfo.Current.get()]}e.regional=[],e.regional[""]=e.regional["zh-CN"]={service:{notAllowRegisterCodeEmpty:"注册Code不能为空",repeatRegistered:"重复注册服务标识:{0}",useNotRegisteredCode:"使用无注册服务标识:{0}"},title:"对象选择器",notSetObjectCode:"没有填写选择对象Codes",defaultNamesLengthNotEqualValuesLength:"默认值的name和value的长度不一致!",buttons:{ok:"确定",clear:"清除",cancel:"取消"},search:{title:"搜索",placeholder:"输入关键字检索"},select:{selected:"已选择",up:"向上",down:"向下"}},e.select=function(e){new t(e)};var r={};function t(r){(r=g.extend(!0,{id:"opicker",title:v().title,width:600,height:500,objectCodes:[],objects:[],splitChar:",",selectMode:0,defaultValue:null,associatedNameControl:null,associatedValueControl:null,onSelectedValue:null,dataFilter:null,onClose:null},r)).objects=r.objects||[];var n=r.objects;if(r.objectCodes&&g.each(r.objectCodes,function(e,t){n.push({code:t})}),0==n.length)throw new Error(v().notSetObjectCode);var e,t,i=this,s={self:this,options:r};if(s.names=[],s.values=[],r.defaultValue?(e=r.defaultValue.name,t=r.defaultValue.value):(r.associatedValueControl&&(t=r.associatedValueControl.val()),r.associatedNameControl&&(e=r.associatedNameControl.val())),t&&(s.names=(e||"").splitRemoveEmptys(r.splitChar),s.values=(t||"").splitRemoveEmptys(r.splitChar),s.names.length!=s.values.length))throw new Error(v().defaultNamesLengthNotEqualValuesLength);s.root=function l(a,e){e.self;var t=function o(e){return'<div class="opicker">    <div class="opicker-tree">         <div class="opicker-tree-direction"></div>        <div class="tab tab-vertical">            <ul class="tab-nav"></ul>            <div class="tab-content"></div>        </div>    </div>    <div class="opicker-selector">        <div class="sbody">            <h4>'+v().select.selected+'：<strong>0</strong></h4>            <div class="scontrol">                <a href="#" class="btn btn-img" data-control="up" title="'+v().select.up+'">                    <i class="fc fc-direction-up"></i>                    <em>'+v().select.up+'</em>                </a>                <a href="#" class="btn btn-img" data-control="down" title="'+v().select.down+'">                    <i class="fc fc-direction-down"></i>                    <em>'+v().select.down+'</em>                </a>            </div>            <ul></ul>        </div>    </div>    <div class="clearfix"></div></div>'}(),n=g(t),i=p.Web.WindowManager.create({id:a.id,title:a.title,width:a.width,height:a.height,shadow:!0,data:{inner:e},onClose:function(){a.onClose&&a.onClose()},buttons:[{text:"{0}".bformat(v().buttons.ok),events:{click:function(){var e=Beyondbit.Web.WindowManager.findByID(a.id),t=e.Data.inner,n=t.self;return n.execEvent("getOPickerValue",null),p.Web.WindowManager.findByID(a.id).close(),!1}}},{text:"{0}".bformat(v().buttons.clear),events:{click:function(){var e=Beyondbit.Web.WindowManager.findByID(a.id),t=e.Data.inner,n=t.self;return n.execEvent("clearSelectedItem",g(this)),!1}}},{text:"{0}".bformat(v().buttons.cancel),events:{click:function(){return Beyondbit.Web.WindowManager.findByID(a.id).close(),!1}}}]});i.setOptions({content:n,title:a.title,width:a.width,height:a.height}),i.Data.inner=e,i.show(),"none"==n.find("div.opicker-tree-direction").css("display")?n.find("div.tab").removeClass("tab-vertical"):n.find("div.tab").addClass("tab-vertical");return n}(r,s),s.selectMode=1==r.selectMode?f.SINGLE:f.MULTIPE;var o={};this.execEvent=function(e,t,n){var a=o[e];return a&&a.fire(t,n,s),!0},this.registerEvent=function(e,t){var n=o[e];n||(n=g.Callbacks(),o[e]=n),n.add(t)},this.value=function(e){if(!e){var t=g(".opicker-selector ul li",s.root),a=[];return t.each(function(e){var t=g(this),n=g.extend(!0,{},t.data("node"),{});a.push(n)}),a}var n=g.map(e,function(e){return e.name}),i=g.map(e,function(e){return e.value}),o={name:n.join(r.splitChar),value:i.join(r.splitChar),names:n,values:i,nodes:e};r.associatedNameControl&&r.associatedNameControl.val(o.name),r.associatedValueControl&&r.associatedValueControl.val(o.value),r.onSelectedValue&&r.onSelectedValue(o)},this.registerEvent("removeSelectedItemed",a),this.registerEvent("removeSelectedIteming",function(e,t,n){var a=n.root,i=g("div.tab-item.current",a);u(g.fn.zTree.getZTreeObj(g("ul.ztree",i).attr("id")),e.data("value"),!1,!0)}),this.registerEvent("moveSelectedIteming",function(e,t,n){return!0}),this.registerEvent("moveSelectedItemed",function(e,t,n){}),this.registerEvent("clearSelectedItem",k),this.registerEvent("insertItem",function(e,t,n){var a=n.root,i=g(".opicker-selector",a),o=g("ul",i),r=h(t);o.append(r),n.self.execEvent("selectedChanged")}),this.registerEvent("removeItem",function(e,t,n){var a=n.root,i=g(".opicker-selector",a),o=g("ul",i);g("li[data-value='{value}']".bformat(t),o).remove(),n.self.execEvent("selectedChanged")}),this.registerEvent("clearItem",function(e,t,n){var a=n.self;a.execEvent("clearSelectedItem",null,n),a.execEvent("selectedChanged")}),this.registerEvent("selectedChanged",function(e,t,n){E(n.root)}),this.registerEvent("getOPickerValue",function(e,t,n){var a=i.value();i.value(a)}),this.registerEvent("tabChanged",function(e,t,n){!function i(n,e,a){if(a=a||!1,n.checkAllNodes(!1),!e)return;g.each(e,function(e,t){u(n,t,!0,a)})}(c(n.root),n.values,!1)}),this.registerEvent("tabChanging",function(e,t,n){}),function d(e){e.self;var t=e.root;(function a(e,t){var i=t.self,n=g(".opicker-selector",e);g("ul",n).click(function(e){var t=g(e.target);if(t.is("i")){var n=t.parent(),a=i.execEvent("removeSelectedIteming",n);1==a&&n.remove();var a=i.execEvent("removeSelectedItemed",n);return!1}if(t.is("li")){var n=t,a=i.execEvent("clickSelectedItemed",n);1==a&&n.addClass("selected").siblings(".selected").removeClass("selected")}})})(t,e),function i(e,t){var c=t.self,n=g(".opicker-selector",e),a=g("div.scontrol a[data-control]",n),d=g("ul",n);a.click(function(){var e=g(this),t=g("li",d),n=t.filter(".selected");if(0==n.length)return!1;var a=t.index(n),i=e.data("control"),o=c.execEvent("moveSelectedIteming",n,i);if(1!=o)return!1;if("up"==i){if(0==a)return!1;var r=n.prev(),s=n.detach();r.before(s)}else if("down"==i){if(a==t.length-1)return!1;var l=n.next(),s=n.detach();l.after(s)}return c.execEvent("moveSelectedItemed",n,i),!1})}(t,e),function n(e,a){var t=g(".opicker-selector",e),i=g("ul",t);g.each(a.values,function(e,t){var n={name:a.names[e],value:t};i.append(h(n))}),E(e)}(t,e),function c(e,o){var r=o.self,t=o.options.objects,n=g(".tab",e),s=g(".tab-nav",n),l=g(".tab-content",n);t.length<=1&&n.addClass("tab-hidden");g.each(t,function(e,t){var n=t.code,a=p.OPicker.getService(n);t.config=g.extend(!0,{},a.config,t.config),s.append("<li>{0}</li>".bformat(t.title||a.title));var i=g('<div class="tab-item"><div class="opicker-dock">'+'<ul class="ztree" id="opicker_ztree_{0}_{1}"></ul></div></div>'.bformat(n,p.getIdentity()));l.append(i),i.data("service-object",t)}),s.find(">li").each(function(i){g(this).click(function(){var e=l.find(".tab-item").eq(i);if(1!=e.data("service-init")){var t=e.data("service-object"),n=p.OPicker.getService(t.code);!function s(e,t,n,a){var i={async:{enable:!0,url:t.getUrl.call(t,n.config),param:["value=code"],chainAjax:t.chainAjax},showIcon:t.showIcon,dataFilter:t.dataFilter,serviceObject:n,service:t},o=i.service.getStaticDataSource.call(i.service,i.serviceObject.config,i.serviceObject);o?o=I(o,b(i,a.options)):i.isAsync=!0;var r=function u(s,a){var r=a.serviceObject,l=function t(e){return!0===e.cascade}(r.config),c=s.options,d=s.selectMode,e={view:{showIcon:function i(n){return function(e,t){return n.showIcon(t,e,n.serviceObject.config,n.serviceObject)}}(a)},async:{enable:!0,autoParam:["id","name","value"],dataFilter:function(e,t,n){return n&&0!=n.length?(function i(e,a){if(!e)return;g.each(e,function(e,t){var n=Array.indexOf(a,t.value);-1<n&&(t.checked=!0)})}(n=I(n,b(a,c)),s.values),n=function o(e,t,n){var a=e;m("OPicker 开始过滤数据"),t.dataFilter&&(a=t.dataFilter(a,t.code));n.options.dataFilter&&(a=n.options.dataFilter(a,t.code));a||m("bindFilterData 过滤数据错误，返回的数据为null");return a}(n,r,s)):null}},check:{enable:!0,chkboxType:{Y:d!=f.SINGLE&&l?"p":"",N:d!=f.SINGLE&&l?"p":""}},data:{simpleData:{enable:!0}},callback:{onCheck:function(e,t,n){if(d!=f.SINGLE&&n.isParent&&l){var a=g.fn.zTree.getZTreeObj(t);if(!n.children)return;var i=n.checked;g.each(n.children,function(e,t){if(1!=t.invalidSelectItem&&t.checked!=i){var n=S(t);a.checkNode(t,i,!0,!1),y.call(s,n,i)}})}else if(2==c.selectMode)(function r(e,t){if(e){var n=t.getParentNode();if(n){var a=!0;g.each(n.children,function(e,t){if(0==t.checked)return a=!1}),a?(x(!0,n,!1),r(e,n)):x(!0,t,!0)}else x(!0,t,!0)}else x(!1,t,!0),w(t)}).call(s,n.checked,n);else{var o=S(n),i=n.checked;if(y.call(s,o,n.checked),i&&d==f.SINGLE){var a=g.fn.zTree.getZTreeObj(t);a.checkNode(n,!0,!0,!1)}}},beforeCheck:function(e,t){if(1!=t.invalidSelectItem||0!=t.zAsync)return!0;var n=g.fn.zTree.getZTreeObj(e);return n.expandNode(t),!1},beforeClick:function(e,t,n){var a=g.fn.zTree.getZTreeObj(e);return 1==t.isParent&&1==t.nocheck?a.expandNode(t):1==t.isParent&&0==t.zAsync&&1==l&&d!=f.SINGLE?a.expandNode(t):a.checkNode(t,null,!0,!0),!1},beforeAsync:function(e,t){return!t||0!=t.hasChilds},onExpand:function(e,t,n){2==c.selectMode&&n.checked&&C(n,!0)},onAsyncSuccess:function(e,t,n,a){}}};(function o(e,n){if(e.isAsync){n.async.enable=!0,n.async.url=e.async.url,n.async.type="get",n.async.dataType="jsonp",n.async.cache=!0;var t=e.async.otherParam||[],a=p.Tenant.getCurrentAccessToken();a&&(t.push(p.Tenant.ACCESS_TOKEN_IDENTITY),t.push(a)),n.async.otherParam=t,e.async.param&&g.each(e.async.param,function(e,t){-1==g.inArray(t,n.async.autoParam)&&n.async.autoParam.push(t)}),e.async.chainAjax&&e.async.chainAjax(n.async)}})(a,e),c.showIcon&&(e.view.showIcon=function(e,t){return c.showIcon(t)});return e}(a,i);g.fn.zTree.init(g("ul.ztree",e),r,o),function h(e,t,n,i){var a=t.getSearchUrl(n.config);if(!a)return;e.prepend('<dl class="opicker-quicksearch"><dt>{title}:<dt><dd><input placeholder="{placeholder}" title="{placeholder}" type="text" name="key" /></dd><dd class="opicker-quicksearch-result hide" hidefocus="true"  tabIndex="8889"><ul></ul></dd></dl>'.bformat(v().search)),e.css("overflow","hidden");var o,r,s=g(".opicker-quicksearch",e),l=g(".opicker-quicksearch-result",e);g(".opicker-dock",e).height(e.parent().height()-s.outerHeight()),g("ul",s).click(function(e){g(this);var t=g(e.target);if(t.is("li")){var n=t;if(!n.hasClass("noSelect")){n.addClass("selected");var a=S(n.data("data"));y.call(i,a,!0)}}}),l.blur(function(){f(!1)}).focus(function(){f(!0)}),g(":input[name=key]",s).focus(function(){f(!0)}).blur(function(){r&&clearInterval(r),r=setInterval(function(){f(!1)},300)}).on("input propertychange",function(){var t=g(this);null!=o&&clearTimeout(o),t.val()-0!=0?o=setTimeout(function(){var e=t.val();!function n(e){var t={keywords:e,requestIndex:c+=1};t[p.Tenant.ACCESS_TOKEN_IDENTITY]=p.Tenant.getCurrentAccessToken(),g.ajax({url:a,data:t,dataType:"jsonp",success:function(e){d<=e.requestIndex&&(u(e.data),d=e.requestIndex)}})}(e)},300):u(null)});var c=1,d=1;function u(e){var t="";if(e&&0<e.length){var e=I(e);t=g.map(e,function(e){var t=g('<li data-name="{name}" title="{tip}" data-value="{value}">{text}</li>'.bformat(e));return t.data("data",e),t})}l.find("ul").html(t)}function f(e){r&&clearInterval(r),e?l.removeClass("hide").show():l.hide()}}(e,t,n,a)}(e,n,t,o),e.data("service-init",!0)}r.execEvent("tabChanging",a);var a=g(this);a.addClass("current").siblings(".current").removeClass("current"),e.addClass("current").siblings(".current").removeClass("current"),r.execEvent("tabChanged",a)})}).eq(0).trigger("click")}(t,e)}(s)}function m(e){p.log(e)}function b(t,n){return function(e){return t.dataFilter(e,t.serviceObject.config,t.serviceObject,n)}}function y(e,t){var n=this,a=n.self,i=n.names,o=n.values,r=Array.indexOf(i,e.name),s=Array.indexOf(o,e.value);n.selectMode==f.SINGLE?(a.execEvent("clearItem",null),t?(o=[e.value],i=[e.name],a.execEvent("insertItem",null,e)):(o=[],i=[]),n.values=o,n.names=i):t?(-1==s&&(o.push(e.value),a.execEvent("insertItem",null,e)),-1==r&&i.push(e.name)):(-1!=s&&(o.splice(s,1),a.execEvent("removeItem",null,e)),-1!=r&&i.splice(r,1))}function c(e){var t=g("div.tab-item.current",e);return g.fn.zTree.getZTreeObj(g("ul.ztree",t).attr("id"))}function u(e,t,n,a){a=a||!1;var i=e.getNodeByParam("value",t);i&&e.checkNode(i,n,!0,a)}function w(e){var t=S(e);zTreeObject.checkNode(e,!1,!1,!1),y(t,!1);var n=e.getParentNode();n&&1==n.checked&&(g.each(n.children,function(e,t){if(1==t.checked){var n=S(t);y(n,!0)}}),w(n))}function x(e,t,n){var a=S(t);e?(zTreeObject.checkNode(t,!0,!1,!1),y(a,!0),1==n&&C(t,!0)):(zTreeObject.checkNode(t,!1,!1,!1),y(a,!1),1==n&&C(t,!1))}function C(e,a){var i=this,t=e.children;t&&0<t.length&&(1==a?g.each(t,function(e,t){var n=S(t);y(n,!1),i.checkNode(t,!0,!1,!1),C(t,a)}):g.each(t,function(e,t){var n=S(t);y(n,!1),i.checkNode(t,!1,!1,!1),C(t,a)}))}function I(e,o){var r=[];return e&&(o&&(e=o(e)),g.each(e,function(e,t){o&&(t=o(t));var n=g.extend(!0,{},t,{id:t.id||g.trim(t.value),name:g.trim(t.name),value:g.trim(t.value),text:t.text||t.name,pId:t.parentId,open:t.open,isParent:t.isParent});r.push(n);var i=function(a){a.nodes&&g.each(a.nodes,function(e,t){o&&(t=o(t));var n=g.extend(!0,{},t,{id:t.id||g.trim(t.value),name:g.trim(t.name),value:g.trim(t.value),text:t.text||t.name,pId:a.id,open:a.open,isParent:t.isParent});r.push(n),i(t)})};i(t)})),r}function S(e){return e}function h(e){var t=g('<li data-value="{value}"><i class="fc fc-circle-close"></i>{name}</li>'.bformat(e));return t.data("node",e),t}function E(e){var t=g(".opicker-selector",e),n=g("ul li",t);g("div.sbody > h4 strong",t).html(n.length)}function a(e,t,n){n.self.execEvent("selectedChanged",null)}function k(e,t,n){n.names=[],n.values=[];var a=n.self,i=g(".opicker-selector",n.root);g("ul",i).html(""),function o(e){c(e).checkAllNodes(!1)}(n.root),a.execEvent("selectedChanged",null)}e.registerService=function(e,t,n,a){var i,o=e;if(!e)throw Error(v().service.notAllowRegisterCodeEmpty);"string"===g.type(e)?i={code:o,title:t,url:n}:g.isFunction(e)||(o=(i=e).code),r[o]=g.extend(!0,{},{dataFilter:function(e){return e},getStaticDataSource:function(){return null},getSearchUrl:function(e){if(this.searchUrl)return this.getUrl(e,this.searchUrl)},getUrl:function(e,t){return t||this.url},showIcon:function(e){return!0}},i)},e.getService=function(e){var t=r[e];if(!t)throw Error(v().service.useNotRegisteredCode.bformat(e));return t}}(jQuery,Beyondbit),function(e,n){function t(e){return 0==e.indexOf("http://")?e:(window.SharedServiceHost||"http://192.168.40.106/SharedService")+e}var a=n.registerNameSpace("OPicker");function i(){return a.regional[n.CultureInfo.Current.get()]}a.regional["zh-CN"].services={orgUser:{title:"按部门"},roleUser:{title:"按角色"},org:{title:"部门"},role:{title:"角色"},source:{title:"选择"},orgDeputy:{title:"选择机构代表",notConfigHierarchyCode:"没有配置hierarchyCode参数"}},a.registerService({code:"orguser",title:i().services.orgUser.title,config:{isShowRoot:!1,rootOrgCode:null,cascade:!0},searchUrl:t("/api/OrgAndUserQuery"),url:t("/api/OrgAndUser"),dataFilter:function(e,t,n,a){return 1==t.isShowRoot&&(e.open=!0),0==function i(e){return!0===e.cascade}(t)||1==a.selectMode?(e.isParent||null!=e.nodes&&0<e.nodes.length)&&(e.nocheck=!0):e.isParent&&(e.invalidSelectItem=!0),"org_region"==e.id&&(e.nocheck=!0),e},getUrl:function(e,t){t=new n.Url(t||this.url);return e.rootOrgCode&&t.appendKey("rootCode",e.rootOrgCode),1==e.isShowRoot&&t.appendKey("isIncludeRoot",e.isShowRoot),t.toString()}}),a.registerService({code:"roleuser",title:i().services.roleUser.title,config:{isShowRoot:!1,code:null,appCode:null},url:t("/api/RoleAndUser"),dataFilter:function(e,t){return(e.isParent||null!=e.nodes&&0<e.nodes.length)&&(e.nocheck=!0),e},getUrl:function(e,t){t=new n.Url(t||this.url);return e.code&&t.appendKey("code",e.code),e.appCode&&t.appendKey("appCode",e.appCode),t.toString()}}),a.registerService({code:"org",title:i().services.org.title,config:{isShowRoot:!1,rootOrgCode:null},url:t("/api/Org"),showIcon:function(e){return!1},dataFilter:function(e,t){return 1==t.isShowRoot&&(e.open=!0),e},getUrl:function(e,t){t=new n.Url(t||this.url);return e.rootOrgCode&&t.appendKey("rootCode",e.rootOrgCode),1==e.isShowRoot&&t.appendKey("isIncludeRoot",e.isShowRoot),t.toString()}}),a.registerService({code:"role",title:i().services.role.title,config:{appCode:null},url:t("/api/Role"),getUrl:function(e,t){t=new n.Url(t||this.url);return e.appCode&&t.appendKey("appCode",e.appCode),t.toString()}}),a.registerService({code:"source",title:i().services.source.title,source:[],config:{},getStaticDataSource:function(e,t){return t.source}}),a.registerService({code:"orgdeputy",title:i().services.orgDeputy.title,url:t("/OrgDeputy/Org"),config:{hierarchyCode:null},showIcon:function(e){return!1},dataFilter:function(e,t){return 1==t.isShowRoot&&(e.open=!0),e},getUrl:function(e){var t=new n.Url(this.url);if(!e.hierarchyCode)throw Error(i().services.orgDeputy.notConfigHierarchyCode);return t.appendKey("hierarchyCode",e.hierarchyCode),e.rootOrgCode&&t.appendKey("rootCode",e.rootOrgCode),1==e.isShowRoot&&t.appendKey("isIncludeRoot",e.isShowRoot),t.toString()}})}(jQuery,Beyondbit),function(t,e){var n=Beyondbit.registerNameSpace("Shadow");n.coverFlash={enabled:!1,blankUrl:"/blank.html"},n.renderJElement=function(){var e=t('<div class="shadow"></div>');return n.coverFlash.enabled&&e.append('<iframe src="{0}" frameborder="0"></iframe>'.bformat(n.coverFlash.blankUrl)),e}}(jQuery),function(t,e){var n=Beyondbit.registerNameSpace("Tenant");n.ACCESS_TOKEN_IDENTITY="AccessToken",n.getCurrentAccessToken=function(){var e=t("#TENANT_ACCESSTOKEN");if(0<e.length)return e.val()}}(jQuery),function(e,t){var n;Beyondbit.Url=n=function(i){i=i||window.location.href;this.request=function l(e){var t={},n=e.indexOf("?");if(-1!=n)for(var a=e.substring(n+1),i=a.split("&"),o=0;o<i.length;o++){var r=i[o].split("="),s=r[0].toLowerCase();t[s]=r[1]||""}return t}(i),this.queryString=function(e){return e?this.request[e.toLowerCase()]:""},this.removeKey=function(e){if(!e)return"";var t=new RegExp("([?&]){0}=[^&]*".bformat(e),"ig");return i=i.replace(t,"$1")},this.appendKey=function(e,t){if(!e)return i;var n=-1<i.indexOf("?"),a="{0}{1}={2}".bformat(n?"&":"?",e,t);return i+=a},this.toString=function(){return i}},n.current=new t.Url,n.back=function(){return window.history.back(),!1},n.backAndRefresh=function(){var e=document.referrer;return e?window.location.href=e:n.back(),!1},n.refresh=function(){window.location.reload()},n.redirect=function(e){window.location.href=e}}(jQuery,Beyondbit||{}),function(v,f){f.registerNameSpace("Web");var e=f.registerNameSpace("Web.MessageBox");function h(){return e.regional[f.CultureInfo.Current.get()]}e.regional=[],e.regional[""]=e.regional["zh-CN"]={messages:{ok:"确定",cancel:"取消",yes:"是",no:"否",close:"关闭"},sysTips:{title:"系统提示",loadingContent:"正在加载.."}},e.Icons={SUCCESS:"fa-check",ERROR:"fa-times",INFO:"fa-info",QUESTION:"fa-question",WARNING:"fa-warning",LOADING:"fa-spinner fa-spin"},e.alert=function(e,t,n,a,i){var o,r,s,l,c;if(0==arguments.length)return Beyondbit.Web.MessageBox.Manager.findByID("alert");var d=arguments.length;if(1<d)if(arguments[d-1]&&v.isFunction(arguments[d-1]))switch(c=arguments[d-1],d){case 2:r=e;break;case 3:o=e,r=t;break;case 4:o=e,r=t,l=n;break;default:o=e,r=t,l=n,s=a}else o=e,r=t,s=a,l=n;else r=e;o=o||h().sysTips.title,l=l||h().messages.ok,s=s||Beyondbit.Web.MessageBox.Icons.INFO;var u="";v.each(Beyondbit.Web.MessageBox.Icons,function(e,t){e==s&&(s=t,u="messagebox-"+e.toLowerCase())});var f=function(){c&&c()};return Beyondbit.Web.MessageBox.show({id:"alert",content:r,title:o,icon:s,btns:[{text:l,callback:f}],draggable:!0,closeBtn:{show:!0,callback:f,defindValue:null},className:u})},e.confirm=function(e,t,n,a,i){var o,r,s,l,c,d="confirm";if(0==arguments.length)return Beyondbit.Web.MessageBox.Manager.findByID(d);var u=arguments.length;if(1<u)if(arguments[u-1]&&v.isFunction(arguments[u-1]))switch(c=arguments[u-1],u){case 2:r=e;break;case 3:o=e,r=t;break;case 4:o=e,r=t,s=n;break;default:o=e,r=t,s=n,l=a}else o=e,r=t,s=n,l=a;else r=e;s=s||[h().messages.ok,h().messages.cancel],l=l||Beyondbit.Web.MessageBox.Icons.QUESTION;var f=function(e){c&&c(e)};return Beyondbit.Web.MessageBox.show({id:d,content:r,title:o,icon:l,draggable:!0,btns:[{text:s[0],callback:f,defindValue:!0},{text:s[1],callback:f,defindValue:!1}],closeBtn:{show:!0,callback:f,defindValue:!1}})},e.prompt=function(e,t,n,a,i){var o,r,s,l=arguments.length;if(0==l)return Beyondbit.Web.MessageBox.Manager.findByID("prompt");if(1==l)e;else if(arguments[l-1]&&v.isFunction(arguments[l-1]))switch(i=arguments[arguments.length-1],l){case 2:e;break;case 3:o=e,t;break;case 4:o=e,t,r=n;break;default:o=e,t,r=n,s=a}else o=e,t,r=n,s=a;var c=t+'\n<input type="text" name="txtpromptcontent" value="'+(r=r||"")+'" />';return s=s||Beyondbit.Web.MessageBox.Icons.QUESTION,Beyondbit.Web.MessageBox.show({id:"prompt",title:o,content:c,icon:s,draggable:!0,btns:[{text:h().messages.ok,callback:function(){if(i)return i(this.rootNode.find(":text[name=txtpromptcontent]").val())},defindValue:""}],closeBtn:{show:!0,callback:i,defindValue:""}})},e.loading=function(e,t,n,a){var i,o,r,s="loading";if(v.isNumeric(e))i=e,o=t;else{if(0==e)return v("#"+s).hide(),!0;e,r=t,i=n,o=a}i&&setTimeout(function(){var e=!0;o&&(e=o()),0!=e&&Beyondbit.Web.MessageBox.loading(!1)},i);var l=f.Web.get_zIndex(),c=v("#"+s);if(0==c.length&&(v("body").append('<div id="loading" class="loading">  <div class="loading-content"></div></div>'),c=v("#"+s),f.Shadow.coverFlash.enabled)){var d=f.Shadow.renderJElement();d.css("opacity","0.1"),c.append(d)}var u="";t=r||h().sysTips.loadingContent;v.each(t,function(e){u+="<span>{0}</span>".bformat(t.charAt(e))}),c.css("z-index",l).find(">div.loading-content").html(u),c.show()},e.loadingPartial=function(){var e=function d(e,t,n,a,i){var o={};return e instanceof jQuery?(o.container=e,"boolean"==v.type(t)?o.isVisible=t:(o.title=t,o.message=n,o.closeSpeed=a,o.onClosing=i),o):o=e}.apply(this,arguments),t=v.extend({},{container:null,title:"",message:"",closeSpeed:null,isVisible:!0,onClosing:null},e,!0);if(t.container&&0!=t.container.length){var n=t.container,a=function u(e){var t=e;t.length;if(0==(n=v(">.loading-partial",t)).length){t.append('<div class="loading loading-partial"><div class="loading-content"></div></div>');var n=v(">.loading-partial",t)}return n}(n);if(0==t.isVisible)return a.hide().parent().removeClass("loading-partial-container"),!0;var i=t.onClosing,o=t.closeSpeed;o&&setTimeout(function(){var e=!0;i&&(e=i()),0!=e&&Beyondbit.Web.MessageBox.loadingPartial(n,!1)},o),n.addClass("loading-partial-container");var r="",s=(t.message||t.title||h().sysTips.loadingContent).split("");v.each(s,function(e){r+="<span>{0}</span>".bformat(s[e])});var l=n.scrollTop(),c=f.Web.get_zIndex();a.css({"z-index":c,top:l}).find(">div").html(r),a.show()}},e.Manager=new function t(){this.findByID=function(e,t){return(t=t||window).Beyondbit.Web.MessageBox.ManagerHelper.findMessageBox(e)},this.create=function(e,t){return new(t=t||window).Beyondbit.Web.MessageBox.init(e)}},Beyondbit.register("Web.MessageBox",function(){return{hide:function(e){e=e||"gloabid";var t=Beyondbit.Web.MessageBox.Manager.findByID(e);return t&&t.hide(),t},show:function(e){return Beyondbit.Web.MessageBox.Manager.create(e).show()},init:function(e){e=v.extend({id:"gloabid",title:"",content:null,btns:null,icon:null,closeBtn:{show:!0,callback:null,defindValue:null},width:400,maxHeight:500,shadow:!0,draggable:!1,className:null},e);var t=Beyondbit.Web.MessageBox.Manager.findByID(e.id);if(t)return t._initData.options=e,t._init(t._initData),t;var n=this;Beyondbit.Web.MessageBox.ManagerHelper.addMessageBox(e.id,this);var a="messagebox_"+e.id,i=a+"_shadow",o=v("#"+a);if(0==o.length){var r=f.Shadow.renderJElement();r.attr("id",i),v("body").append(r),v("body").append(' <div class="messagebox" id="'+a+'">     <section class="shead"><h4>&nbsp;</h4></section>     <a href="" class="close btn btn-img" title="'+h().messages.close+'"><i class="fc fc-close"></i></a>     <section class="sbody padding-base padding-none-bottom">         <div class="sicon">             <span class="fa-stack fa-lg">                 <i class="fa fa-stack-2x fa-circle"></i>                 <i class="fa fa-stack-1x fa-info messagebox-icon" data-beforeicon="fa-info"></i>             </span>         </div>         <div class="scontent"></div>     </section>    <section class="sfoot"></section></div>'),o=v("#"+a)}var p=v("#"+i);return n.rootNode=o,n._initData={root:o,rootShadow:p,options:e},n._init=function(e){var a=this,t=e.options,n=e.root;n.attr("class","messagebox"+(" "+t.className||""));var i=Beyondbit.Web.MessageBox.ManagerHelper.get_zIndex();p.css("z-index",i),n.css("z-index",i),t.closeBtn.show?n.find(" > .close").off("click").click(function(){var e=!0;return t.closeBtn.callback&&(e=t.closeBtn.callback.call(a,t.closeBtn.defindValue)),0!=e&&a.hide(),!1}):n.find(" > .close").hide(),t.draggable&&n.draggable&&1!=a.draggableDone&&(v(" > .shead > h4",n).css({cursor:"move"}),n.draggable({cursor:"move",handle:"> .shead > h4",containment:"window"}),a.draggableDone=!0),n.find(" > .shead > h4").html(t.title||"&nbsp;");var o=v(".messagebox-icon",n),r=o.data("beforeicon"),s=t.icon||"fa-info";r!==s&&(o.removeClass(r).addClass(s),o.data("beforeicon",s)),v(".scontent",n).html(t.content);var l=v(".sfoot",n).html("");t.btns&&0<t.btns.length?(l.show(),v.each(t.btns,function(e,t){var n=v('<a href="#" class="btn"><i class="fa {icon}"></i>{text}</a>'.bformat({text:t.text,icon:t.iconclass||t.icon})).click(function(){var e=!0;return t.callback&&(e=t.callback.call(a,t.defindValue)),0!=e&&a.hide(),!1});l.append(n)})):l.hide();var c=v(window).width(),d=v(window).height()-20,u=Math.min(t.maxHeight,d),f=n.height(),h=Math.min(t.width,c);if(u<f){var g=(f=u)-v(".shead",n).height()-v(".sfoot",n).height()-40;v(".sbody",n).height(g)}n.css({width:h+"px","margin-left":"0","margin-top":"0",left:(c-h)/2+"px",top:(d-f)/2+"px"})},n._init(n._initData),n.hide=function(){return o.hide(),p.hide(),n},n.show=function(){return o.show(),e.shadow?p.show():p.hide(),n},n.show(),n}}}),Beyondbit.register("Web.MessageBox",function(){return{ManagerHelper:{get_zIndex:function(){return f.Web.get_zIndex()},_Queue:{},addMessageBox:function(e,t){Beyondbit.Web.MessageBox.ManagerHelper._Queue[e]=t},findMessageBox:function(e){var t=Beyondbit.Web.MessageBox.ManagerHelper;for(var n in t._Queue)if(n==e)return t._Queue[e];return null}}}})}(jQuery,Beyondbit),function(k,T){var e=T.registerNameSpace("Web");function B(){return e.Window.regional[T.CultureInfo.Current.get()]}function N(g,p,v,m,b,y,w,x,C){p.mousedown(function(e){var s=(e=e||window.event).clientX-p.position().left,l=e.clientY-p.position().top,c=g.offset().top,d=g.offset().left,u=g.outerWidth(),f=g.outerHeight(),h=null;return k(document).mousemove(function(e){var t=(e=e||window.event).clientX-s,n=e.clientY-l,a=k(document).width()-g.offset().left-2,i=k(document).height()-g.offset().top-2,o=b?u-t:p.outerWidth()+t,r=y?f-n:p.outerHeight()+n;return b&&g.css("left",d+t+"px"),y&&g.css("top",c+n+"px"),o<v&&(o=v),a<o&&(o=a),w||g.css("width",o+"px"),r<m&&(r=m),i<r&&(r=i),x||g.css("height",r+"px"),(b&&o==v||y&&r==m)&&k(document).unbind("mousemove"),(y&&g.offset().top<0||b&&g.offset().left<0)&&k(document).unbind("mousemove"),h&&clearTimeout(h),h=setTimeout(function(){C&&C()},300),!1}),k(document).mouseup(function(){k(document).unbind("mousemove"),k(document).unbind("mouseup")}),!1})}e.WindowManager=new function t(){this.findByID=function(e,t){return(t=t||window).Beyondbit.Web.WindowManagerHelper.findWindow(e)},this.findForParentByID=function(e){return this.findByID(e,parent)},this.create=function(e,t,n){if(t=t||window,"always"==(n=n||"once")){var a=this.findByID(e.id,t);a&&a.destory()}return new t.Beyondbit.Web.Window(e)},this.get=function(e,t){return e&&"string"==k.type(e)?T.Web.WindowManager.findByID(e,t):(t=(t=e)||parent,e=T.Url.current.queryString("DialogId"),this.findByID(e,t))}},e.Window=function(n){n=k.extend({id:"",shadow:!1,draggable:!0,resize:!1,loading:"normal",width:400,height:100,content:null,title:"",url:"",buttons:[],data:{},requestData:{},onOk:null,onClose:null,onCancel:null,onResize:null},n);if(this.ID=n.id,!this.ID||""==this.ID)throw B().notAllowIdIsEmpty;var a=this;this.Data=n.data;var e=Beyondbit.Web.WindowManager.findByID(this.ID);if(e)return e;Beyondbit.Web.WindowManagerHelper.addWindow(this.ID,this);var i=Beyondbit.Web.WindowHelper;this.ElementID="mzj_"+this.ID+"_box";var o={frameUrl:"",rootElement:null,contentMode:"iframe"},t=T.Shadow.renderJElement();t.attr("id",this.ElementID+"_shadow").addClass("window-shadow").css("display","none");var r='<div id="'+this.ElementID+'" class="window" style="display:none;"><div class="window-box"><div class="resizeBox hide"><div class="resizeL"></div><div class="resizeT"></div><div class="resizeR"></div><div class="resizeB"></div><div class="resizeLT"></div><div class="resizeTR"></div><div class="resizeBR"></div><div class="resizeLB"></div></div><section class="shead">    <h3>'+n.title+'</h3></section><section class="sbody">    <iframe src="" frameborder="0" scrolling="auto"></iframe>     <section class="scontainer"></section></section>    <section class="sfoot"></section>    <div class="window-loading loading">\t\t<div class="loading-content">'+function E(){var t=B().loading,n="";return k.each(t,function(e){n+="<span>{0}</span>".bformat(t.charAt(e))}),n}()+"\t\t</div>\t</div>"+'<a href="#" class="close btn btn-img" onclick="return false;" title="{0}"><i class="fc fc-close"></i><label>{0}</label></a>'.bformat(B().buttons.close)+'<a href="#" title="{0}" class="max btn btn-img hide"><i class="fc fc-publish-o"></i><label>{0}</label></a>'.bformat(B().buttons.max)+'<a href="#" title="{0}" class="revert btn btn-img hide"><i class="fc fc-copy"></i><label>{0}</label></a>'.bformat(B().buttons.revert)+"</div></div>";k("body").append(t),k("body").append(r);var s=o.rootElement=k("#"+this.ElementID),l=k("> .window-box",s);t.on("touchstart",function(e){e.preventDefault()}),k("a.close",s).click(function(){n.onClose&&n.onClose("close"),a.hide()});var c=n.buttons;if(c&&0<c.length){l.addClass("window-style-foot");var d=k(".sfoot",s);k.each(c,function(e,t){var n=k('<a href="#" onclick="return false;" class="btn"><span class="icon icon-'+t.icon+'"></span>'+t.text+"</a>");t.events&&k.each(t.events,function(e,t){n.on(e,t)}),d.append(n)})}if(n.draggable&&s.draggable&&(k("section.shead > h3",s).css({cursor:"move"}),s.draggable({cursor:"move",handle:"section.shead > h3",containment:"window"})),n.resize){k(".window .resizeBox").removeClass("hide");var u=k(".window .max"),f=k(".window .revert"),h=n.width,g=n.height,p=s;u.removeClass("hide");var v=n.onResize;u.click(function(){p.css({left:0,top:0}),p.width(k(document).outerWidth()-2),p.height(k(document).outerHeight()-2),u.addClass("hide"),f.removeClass("hide"),v&&v()}),f.click(function(){p.width(h).height(g),p.offset({left:(k(document).outerWidth()-p.outerWidth())/2,top:(k(document).outerHeight()-p.outerHeight())/2}),f.addClass("hide"),u.removeClass("hide"),v&&v()});var m=k(".resizeL",p),b=k(".resizeT",p),y=k(".resizeR",p),w=k(".resizeB",p),x=k(".resizeLT",p),C=k(".resizeTR",p),I=k(".resizeBR",p),S=k(".resizeLB",p);N(p,x,h,g,!0,!0,!1,!1,v),N(p,C,h,g,!1,!0,!1,!1,v),N(p,I,h,g,!1,!1,!1,!1,v),N(p,S,h,g,!0,!1,!1,!1,v),N(p,m,h,g,!0,!1,!1,!0,v),N(p,b,h,g,!1,!0,!0,!1,v),N(p,y,h,g,!1,!1,!1,!0,v),N(p,w,h,g,!1,!1,!0,!1,v)}return this.getOptions=function(){return n},this.show=function(){a.message({hide:!0});var e=T.Web.get_zIndex(2);return s.css("z-index",e).show(),"none"!==n.loading&&a.message({title:B().loading,content:""}),n.shadow&&t.css("z-index",e-1).show(),"iframe"==o.contentMode?s.find("iframe").attr("src",o.frameUrl).css({display:"block",visibility:"visible"}).siblings().hide():(s.find(".scontainer").show().siblings().hide(),a.message({hide:!0})),a},this.message=function(e){var t=k.extend({hide:!1,title:B().loading,content:""},e);return i.message(a,t,o),s.show(),a},this.setOptions=function(e){return n=k.extend(n,e),i.initWindow(a,n,o),a},this.close=function(e,t){return n.onClose&&n.onClose.call(this,e,t),this.hide(),a},this.ok=function(e){var t=!1;return n.onOk&&(t=!0,n.onOk.call(this,e)),n.onClose&&(t=!0,n.onClose.call(this,"ok",e)),t||this.hide(),a},this.cancel=function(e){var t=!1;return n.onCancel&&(t=!0,n.onCancel.call(this,e)),n.onClose&&(t=!0,n.onClose.call(this,"cancel",e)),t||this.hide(),a},this.hide=function(){return s.find("iframe").css("visibility","hidden"),t.hide(),setTimeout(function(){s.hide()},50),a},this.destory=function(){s.remove(),t.remove(),Beyondbit.Web.WindowManagerHelper.removeWindow(this.ID)},i.initWindow(a,n,o),a},e.Window.regional=[],e.Window.regional[""]=e.Window.regional["zh-CN"]={notAllowIdIsEmpty:"组件Id不能为空",loading:"正在加载..",buttons:{close:"关闭"}},Beyondbit.register("Web",function(){return{WindowHelper:{initWindow:function(e,t,n){var a=t.content?"content":"iframe",i=n.rootElement,o=-1<t.url.indexOf("?")?"&":"?",r=t.url+o+"DialogId="+e.ID;for(var s in t.requestData){var l=t.requestData[s];r=r+"&"+s+"="+encodeURIComponent(l)}n.frameUrl=r,"iframe"==(n.contentMode=a)&&0<k("iframe",i).length&&(k("iframe",i)[0].onreadystatechange=k("iframe",i)[0].onload=function(){this.readyState&&"complete"!=this.readyState?"away"==t.loading&&Beyondbit.Web.WindowHelper.message(e,{title:B().loading,content:""},n):Beyondbit.Web.WindowHelper.message(e,{hide:!0},n)}),k("section.scontainer",i).html(t.content),k("section.shead h3",i).html(t.title);var c=k(window).height()-20;c>t.height&&(c=t.height);var d=k(window).width()-20;d>t.width&&(d=t.width),i.css({width:d+"px",height:c+"px"}),0==k.support.boxSizing&&i.css({"margin-left":"-"+d/2+"px","margin-top":"-"+c/2+"px"});var u=k(window).width(),f=k(window).height()-20;i.css({width:d+"px","margin-left":"0","margin-top":"0",bottom:"auto",right:"auto",left:(u-d)/2+"px",top:(f-c)/2+"px"});var h=c-k("section.shead",i).height(),g=k("> .window-box",i),p=k("section.sfoot",i);return g.hasClass("window-style-foot")&&(i.find("section.sbody").addClass("dialog_container_layout_nobuttons"),h-=p.outerHeight()),i.find("section.sbody").height(h),e},message:function(e,t,n){if(1==t.hide)k(".window-loading",n.rootElement).hide();else{var a="",i=t.title;k.each(i,function(e){a+="<span>{0}</span>".bformat(i.charAt(e))}),k(".window-loading",n.rootElement).find(".loading-content").html(a),k(".window-loading",n.rootElement).show()}}},WindowManagerHelper:{_Queue:{},addWindow:function(e,t){Beyondbit.Web.WindowManagerHelper._Queue[e]=t},findWindow:function(e){var t=Beyondbit.Web.WindowManagerHelper._Queue[e];return t||null},removeWindow:function(e){delete Beyondbit.Web.WindowManagerHelper._Queue[e]}}}})}(jQuery,Beyondbit),function(e,t){var n=Beyondbit.registerNameSpace("Web"),a=2500;n.get_zIndex=function(e){return a+=e||1}}(jQuery),Date.prototype.bformat=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},String.prototype.bformat=function(e){var t=this;if(0<arguments.length)if(1==arguments.length&&"object"==typeof e)for(var n in e){var a=new RegExp("({"+n+"})","g");t=t.replace(a,e[n]||"")}else for(var i=0;i<arguments.length;i++){a=new RegExp("({["+i+"]})","g");var o=arguments[i];t=t.replace(a,null==o||o==undefined?"":o)}return t},String.prototype.parseToDate=function(){var e=this;return 0==e.indexOf("/Date")?(e=e.substring(6,e.length-2),new Date(e-0)):(e=e.replace("T"," ").replace(/-/g,"/"),new Date(e))},String.prototype.splitRemoveEmptys=function(e,t,n){var a=this.split(e,t||1e3);if(0!=n&&(n=!0),n)for(var i in a)a[i]-0==0&&a.splice(i,1);return a},function(f,e){var t=e.registerNameSpace("jQueryEx.Pager");function r(){return t.regional[e.CultureInfo.Current.get()]}t.regional=[],t.regional[""]=t.regional["zh-CN"]={prevText:"上一页",nextText:"下一页",pageCurrent:"当前页",pageTotal:"总页数",pageSize:"每页",recordTotal:"总数",redirect:"跳转至",recordUnit:"条"};var h="get",g="post",n="center";var p=function(){};p.addToUrlParam=function(e,t,n){var a=t+"="+encodeURIComponent(n),i=e.split("?"),o=i[0],r=1<i.length?i[1]:"",s=[];if(!(0<r.length))return e+"?"+a;if(-1==r.indexOf(t))return e+"&"+a;s=r.split("&");for(var l=0,c="";;){if(l>=s.length)return o+"?"+c+a;var d=s[l];0!=d.indexOf(t+"=")&&0!=d.length&&(c+=d+"&"),++l}},p.makePagingUrl=function(e,t,n){var a=e.linkTo,i=e.addToUrlDomIds,o={};o[e.pageIndexParamName]=t,o[e.pageSizeParamName]=n;for(var r=0;r<i.length;++r){var s=i[r],l=p.getElementsByIdOrName(s);null!=l&&(o[s]=f(l).val())}for(var c in o)a=p.addToUrlParam(a,c,o[c]);return a},p.getElementsByIdOrName=function(e){var t=document.getElementById(e);return null==t?document.getElementsByName(e):t},p.renderPageStatisticsItem=function(e,t,n,a){e.append('<li class="'+t+'">'+n+"<strong>"+a+"</strong>&nbsp;</li>")},p.renderPageNavigationItem=function(e,t,n){e.append('【<a class="'+t+'">'+n+"</a>】")},p.renderPageStatistics=function(e,t,n,a,i){p.renderPageStatisticsItem(e,"lab-pagecurrent",r().pageCurrent+":",t),p.renderPageStatisticsItem(e,"lab-pagetotal",r().pageTotal+":",n),p.renderPageStatisticsItem(e,"lab-pagesize",r().pageSize+":",a),p.renderPageStatisticsItem(e,"lab-recordtotal",r().recordTotal+":",i)},p.renderPageNavigation=function(e,t){var n=f("<li>").addClass("control");t.prevShowAlways&&p.renderPageNavigationItem(n,"prev",t.prevText),t.nextShowAlways&&p.renderPageNavigationItem(n,"next",t.nextText),e.append(n)},p.renderPageSizeOptions=function(e,a){var i="<li class=pagesize>"+r().pageSize+"&nbsp;<select>";f.each(a.pageSizeItems,function(e,t){var n=t==a.pageSize?"selected":"";i+="<option value="+t+" "+n+">"+t+"</option>"}),i+="</select>&nbsp;"+r().recordUnit+"&nbsp;</li>",e.append(i)},p.renderPageRedirect=function(e){var t=f("<li>").addClass("redirect");t.append(r().redirect+" <input type=text name=page /> <a href=#>GO</a>"),e.append(t)},p.calulatePageIndex=function(e,t){return Math.ceil(e/t)-1},f.fn.pager=function(c){var e=f.data(this,"pager");if(e)return e;f.data(this,"pager",this);var d=this,o=f("<ul>"),u=f.extend(function t(){return{align:n,pageSize:15,count:0,currentPageIndex:0,type:h,pageIndexChanging:null,linkTo:window.location.href,prevText:r().prevText,nextText:r().nextText,pageIndexParamName:"pageIndex",pageSizeParamName:"pageSize",pageSizeItems:[10,15,20,50],mode:0,prevShowAlways:!0,nextShowAlways:!0,addToUrlDomIds:[],postForm:f("form:first")}}(),c);return this.setOptions=function(e){var t=(u=f.extend(u,e)).count,n=u.pageSize;if(!(t<=0||n<=0)){var a=u.currentPageIndex,i=u.mode,o=p.calulatePageIndex(t,n)+i;o<a||t<=n||(u.pageIndex=o,d.render(u,o,i))}},this.render=function(e,t,n){var a=e.type.toLowerCase(),i=f(e.postForm).clone();0==i.length&&(a=h),e.postType=a,e.postForm=i,d.renderChildControls(o,e,t,n),d.bindChildControlsEvent(o,e,t,n)},this.renderChildControls=function(e,t,n,a){var i=t.count,o=t.pageSize,r=t.currentPageIndex;p.renderPageStatistics(e,r-a+1,n+1,o,i),p.renderPageNavigation(e,t),p.renderPageSizeOptions(e,t),p.renderPageRedirect(e),f(d).addClass("pagination").empty().append(e)},this.bindChildControlsEvent=function(e,t,n,a){var i=t.currentPageIndex,o=t.postType,r=e.find("a[class='prev']"),s=e.find("a[class='next']");o==h?(r.each(function(e,t){d.doPageCore(i-1,f(t))}),s.each(function(e,t){d.doPageCore(i+1,f(t))})):(r.click(function(){d.doPage(i-1)}),s.click(function(){d.doPage(i+1)})),e.find("li[class='pagesize'] > select").change(function(){t.pageSize=f(this).val(),d.doPage(0+a)}),e.find("li[class='redirect'] > a").click(function(){var e=f(this).prev().val();0!=e.length&&d.doPage(parseInt(e)-1+a)})},this.doPageCore=function(e,t){var n=u.pageSize,a=u.pageIndex,i=u.mode,o=u.pageIndexChanging,r=u.postType,s=u.postForm;if(f.isFunction(o))o.call(d,e,c);else if(!(e-i<0||a<e+i)){var l=p.makePagingUrl(u,e,n);r==g?(f(document.body).append(s.hide()),s.attr({method:r,action:l}).submit()):r==h&&(t?t.attr("href",l):window.location.href=l)}},this.doPage=function(e){d.doPageCore(e,null)},this.init=function(){d.setOptions(c)},d.init(),d}}(jQuery,Beyondbit),function(o,r){var s=r.registerNameSpace("Controls");o.fn.Form=function(e){var t="{0}_Form".bformat(r.DESIGNATION);if(0==this.length)return null;if(!e){var n=this.eq(0).data(t);if(n)return n}var a=this.eq(0);e=o.extend(!0,{},{target:a},e);var i=s.Form.create(e);return a.data(t,i),i}}(jQuery,Beyondbit),function(r,s){var t=s.registerNameSpace("Controls");function l(e,t,n){1==n.isSubmitShowLoading&&s.Web.MessageBox.loading(null,n.loadingMessage),null!=t&&t.disabled()}t.Form=function(e){e=function i(e){var t=s.CultureInfo.Current.getCommonRegional(),n=r.extend(!0,{regulate:null,target:null,isSubmitShowLoading:!0,loadingMessage:t.someThingSaving.bformat(t.data)},{},e);return function a(e){!function i(e,t,n,a){if(e[t]==n)throw new Error((a||"参数配置不正确").bformat(t))}(e,"target",null,"{0}参数必填")}(n),n}(e),function o(e,t){var n=function a(e,t){var n;t&&"string"===r.type(t)&&(n=e.Regulate(t));return n}(e,t.regulate);e.submit(function(){e.valid?e.valid()&&l(e,n,t):l(e,n,t)})}(r(e.target),e)},t.Form.create=function(e){return new t.Form(e)}}(jQuery,Beyondbit),function(l,a){var i=a.registerNameSpace("Controls");function c(e){var t=this.getOptions();t.onSelectedValueRaw&&t.onSelectedValueRaw.call(this,e);var n=t.index,a=t.target.data("interlock").childs;if(n<a.length-1){var i=a[n+1];!function o(e,t){var n=e.DropDownList();n.setOptions(t),n.reset()}(i.element,{async:{enable:!0,url:i.options.async.rawUrl+e.value}})}}function d(){var e=this.getOptions(),t=e.index,n=e.target.data("interlock").childs;t<n.length-1&&n[t+1].element.DropDownList().empty()}l.fn.InterLock=function(e){"{0}_InterLock".bformat(a.DESIGNATION);if(0==this.length)return null;var t=l(this.eq(0)),n=t.data("dataKey");return n||((e=l.extend(!0,{},{},e)).target=t,n=new i.interlock(e),t.data("dataKey",n)),n},i.interlock=function(e){var n=function i(e){var t={options:e,sender:this,childs:[]};return t}(e=l.extend(!0,{},{},e)),t=[],a=this;this.add=function(e){return t.push(e),a},this.exec=function(){return l.each(t,function(e,t){!function s(e,t,n){var a=e.target||e.selectValueToControl||e.selectTextToControl,i=l.extend(!0,{},{},e);if(0==t)i.async.enable=!0,i.async.url=i.async.rawUrl;else{var o=n.childs[t-1].element,r=o.DropDownList().value().value;r?(i.async.enable=!0,i.async.url=i.async.rawUrl+r):i.async.enable=!1}i.index=t,i.onSelectedValueRaw=i.onSelectedValue,i.onSelectedValue=c,i.onReset=d,i.onEmpty=d,a.DropDownList(i),n.childs.push({element:a,options:i}),a.data("interlock",n)}(t,e,n)}),a}},i.interlock.empty=function(){var e=new i.interlock;return e.add=exec=function(){return this},e}}(jQuery,Beyondbit),function(i,o){var r=o.registerNameSpace("Controls");i.fn.Regulate=function(e){var t="{0}_Regulate".bformat(o.DESIGNATION);if(0==this.length)return null;if(!e)return this.eq(0).data(t);var n=this.eq(0);e=i.extend(!0,{},{target:n},e);var a=r.Regulate.create(e);return n.data(t,a),a};var t=r;t.Regulate=function(e){e=function n(e){var t=i.extend(!0,{controls:null,target:null},{},e);return t}(e);var t=i(e.controls);this.disabled=function(e){return 0==e?t.removeAttr("disabled"):t.attr("disabled","disabled"),this},this.show=function(e){return 0==e?t.addClass("hide"):t.removeClass("hide"),this},this.hide=function(){return this.show(!1)}},t.Regulate.create=function(e){return new t.Regulate(e)}}(jQuery,Beyondbit),function(){var e=B.registerNameSpace("Controls"),t=e.repeatEditor=function(e,t){t=$.extend({onItemBindEvents:function(){},onItemDeleting:function(){},onItemDeleted:function(){},onInsertItemData:function(e,t){},defaultItemCount:0,maxItemCount:0},t),this.target=e,this.options=t,this.inner={},function r(n){(function o(){var e=this;$("[belvoly-controls-command=add]",e.target).click(function(){e.addItem.call(e)}),$("[belvoly-controls-command=remove]",e.target).click(function(){e.removeItem.call(e,$(this))})}).call(this,n);var e,t,a=$("[belvoly-controls-template=ItemTemplateAndRemove]:last",this.target);if(0<a.length)e=a.detach().attr("belvoly-controls-template","ItemTemplate"),t=a.parent();else{var i=$(s+":last",this.target);t=i.parent(),e=i.clone(!0)}this.inner.$ItemTemplateContainer=t,this.inner.$ItemTemplate=e,$(s,this.target).each(function(e,t){n.onItemBindEvents&&n.onItemBindEvents.call($(this))})}.call(this,t)},s="[belvoly-controls-template=ItemTemplate]";t.prototype.addItem=function(){var e=this.inner.$ItemTemplate.clone(!0);return this.inner.$ItemTemplateContainer.append(e),this.options.onItemBindEvents&&this.options.onItemBindEvents.call(e),e},t.prototype.insertItemData=function(e){var t=this.addItem();this.options.onInsertItemData&&this.options.onInsertItemData(t,e)},t.prototype.removeItem=function(e){var t=e.closest(s);this.options.onItemDeleting&&this.options.onItemDeleting.call(t),t.remove(),this.options.onItemDeleted&&this.options.onItemDeleted.call(t)},t.prototype.serializeArray=function(a){var e=$(s,this.target);return $.map(e,function(e){var n={};return $(e).find(":text,input[type=hidden],:checkbox,select").each(function(){var e=$(this);if(!e.attr("disabled")){var t=e.val();e.is(":checkbox")&&0==e[0].checked&&(t=""),t&&(n[e.attr("name").replace(a,"")]=e.val())}}),n})}}(),function(d,c){d.fn.DropDownList=function(i){var o="{0}_Select".bformat(c.DESIGNATION);return 0==this.length?this:i?(i=d.extend(!0,{},{},i),this.each(function(e,t){var n=d(t),a=n.data(o);a||(i.target=n,a=new u.select(i),n.data(o,a))}),this):this.eq(0).data(o)};var u=c.registerNameSpace("Controls");function i(e){e.rootElement.find(":text[name='{0}.key']".bformat(c.DESIGNATION)).val("").data("prevselecttext",null)}function f(e,t){var a=t.find("ul");a.html("").data("bfcl_data",e),e&&0!=e.length?d.each(e,function(e,t){var n=d('<li class="{3}"><a href="#" data-value="{1}" data-name="{2}" title="{0}">{0}</a></li>'.bformat(t.text,t.value,t.name,t.noCheck?"noSelect":""));n.data("bfcl_data",t),a.append(n)}):a.append("<li class='empty'>无数据!</li>")}function h(e,t,n){if((t=t||e.sender.value())&&t.value){var a=e.rootElement;(n=n||a.find("ul li a[data-value='{0}']".bformat(t.value)).parent()).addClass("selected").siblings().removeClass("selected"),t.name=t.name||n.find("a").data("name"),d(":text[name='{0}.key']".bformat(c.DESIGNATION),a).val(t.name).data("prevselecttext",t.name)}}function g(e,t,n,a,i){var o=d(this),r=o.data("previousKeywords")||"";if((n=d.trim(n))!=r)if(o.data("previousKeywords",n),""!==n){if(0==e.searchMode){t=t;var s=d.grep(t,function(e,t){return 0==e.text.indexOf(n)});a(s)}else if(1==e.async.enable){i.sender.loading(),i.searchCurrentXhq&&i.searchCurrentXhq.abort();var l=d.extend(!0,{url:e.async.url,dataType:"json",data:{maxLength:e.maxLength,keywords:n},success:function(e){a(m(e))},error:function(){}},e.async),c=d.ajax(l);c.then(function(){i.searchCurrentXhq=null},function(){i.searchCurrentXhq=null}),i.searchCurrentXhq=c}}else a(i.data)}function p(e,t){if(e.source)t(m(e.source));else if(1==e.async.enable){var n=d.extend(!0,{url:e.async.url,dataType:"json",data:{maxLength:e.maxLength},success:function(e){t(m(e))},error:function(){}},e.async);d.ajax(n)}else t([])}function v(e,t){var n=t.maxLength;return e.length>n&&(e=e.slice(0,n)),e}function m(e){return e&&d.each(e,function(e,t){t.name=t.name||t.text,t.text=t.text||t.name}),e}u.select=function(a){(a=d.extend(!0,{id:"",target:null,placeholder:"请选择",async:{enable:!1,url:null},width:0,minWidth:0,maxWidth:0,className:null,splitChar:",",selectValueToControl:null,selectTextToControl:null,onSelectedValue:null,makeText:u.makeText,makeValue:u.makeValue,warpElement:function(e){this.options.target.before(e)},onReset:null,onEmpty:null,maxLength:1e5,searchMode:0,onSearch:g},{},a)).target=a.target||a.selectValueToControl||a.selectTextToControl;var o={options:a,sender:this};this.inner=o;var e=a.id||a.target.attr("id");e||(e=getGuidGenerator()),this.id=c.DESIGNATION+"_controls_select_{0}".bformat(e);var r=this;function t(e){e=v(e,a),f(o.data=e,o.rootElement),h(o)}this.setOptions=function(e){o.options=d.extend(!0,{},o.options,e)},this.getOptions=function(){return d.extend(!0,{},o.options,{})},this.reset=function(){i(o),this.value({text:"",value:""},!1),p(o.options,t),a.onReset&&a.onReset.call(r)},this.empty=function(){i(o),this.value({text:"",value:""},!1),t([]),a.onEmpty&&a.onEmpty.call(r)};var s={};this.value=function(e,t){if(!e){var n={text:a.makeText.get.call(o)[0]||s.name||s.text,value:a.makeValue.get.call(o)[0]||s.value};return!n.text&&n.value&&(n.text=function i(e,t){if(t){var n=e.rootElement,a=n.find("ul li a[data-value='{0}']".bformat(t));return a.data("name")}}(o,n.value)),n}s=e,a.makeText.set.call(o,e),a.makeValue.set.call(o,e),0!=t&&a.onSelectedValue&&a.onSelectedValue.call(r,e)},this.expand=function(e){var t=o.rootElement;if(e)t.addClass("{0}_controls_select_hover".bformat(c.DESIGNATION));else{t.removeClass("{0}_controls_select_hover".bformat(c.DESIGNATION));var n=t.find(":text[name='{0}.key']".bformat(c.DESIGNATION));n.val(n.data("prevselecttext"))}return this},this.destory=function(){this.rootElement.remove()},this.loading=function(e){return e=e||"加载中...",o.rootElement.find("ul").html("<li class='empty'>{0}</li>".bformat(e)),this},function l(e){var t=d("#"+e.sender.id);if(0==t.length){var n=e.options;t=d(('<div id="{0}" class="'+c.DESIGNATION+'_controls_select {1}">&nbsp;</div>').bformat(e.sender.id,n.className));var a=('<span><em><i class="fa fa-angle-double-down"></i></em><label><input type="text" name="'+c.DESIGNATION+'.key" placeholder="{0}" /></label></span>').bformat(e.options.placeholder);a+="<ul></ul>",a=('<div class="'+c.DESIGNATION+'_controls_select_container"><div>{0}</div></div>').bformat(a),t.append(a);var i=0==n.minWidth?n.width:n.minWidth,o=n.maxWidth<n.width?n.width:n.maxWidth,r=d(".{0}_controls_select_container".bformat(c.DESIGNATION),t);0<n.width&&t.width(n.width),0<i&&(t.css("min-width",i),r.css("min-width",i)),0<o&&t.css("max-width",i),e.options.warpElement.call(e,t),e.rootElement=t}}(o),function n(i){var o=i.sender,r=i.rootElement;if(1==r.data("bfcl_bindevent"))return;r.data("bfcl_bindevent",!0);var e=d(":text[name='{0}.key']".bformat(c.DESIGNATION),r);r.find("ul").click(function(e){var t=d(e.target),n=t.parent();if(t.is("a")&&n.is("li:not(.empty,.noSelect)")){var a=n.data("bfcl_data");return h(i,a,n),o.value(a),o.expand(!1),!1}return!1}),e.keyup(function(e){var t=d(this),n=t.val(),a=i.options;a.onSearch.call(this,a,i.data,n,function(e){o.expand(!0),f(e=v(e,a),r)},i)}),r.click(function(e){e.stopPropagation()}),r.find("em").click(function(){o.expand(!0)}),d("body").click(function(){o.expand(!1)})}(o),this.loading(),p(o.options,t)}}(jQuery,Beyondbit),function(l,o){var e=o.registerNameSpace("Controls"),c="exists_file_",t=e;function d(){return o.CultureInfo.Current.getRegional(t.Uploader.regional)}function u(e){if(this.onError)return this.onError(e,arguments),!1;!function t(e){o.Web.MessageBox.alert(d().uploadWaringTitle,e,null,"WARNING")}(e)}function f(e,t,n){e.onUploadError?e.onUploadError(t,n):function a(e,t){var n=m(e);n.addClass("uploader-item-error").attr("title",d().uploadErrorTextFormat.bformat(t)),l(".uploader-item-tip",n).html(d().uploadFailText).attr("title","").addClass("hide"),b(e)}(t,n)}function h(e,t,n){if(e[t]==n)throw new Error("参数配置不正确")}function g(e){var t=e-0;return isNaN(t)?e:t}function p(e,t,n){if(null!=e){t.sizefriendy=v(t.size);var a=l(".uploader-items > ul",e),i=l('<li class="uploader-item"></li>');i.append('<span class="uploader-item-tip"></span><a href="#" id="{id}"><i class="fa fa-paperclip fa-rotate-90"></i> {name}</a><em>({sizefriendy})</em>'.bformat(t)),i.append('<span class="uploader-item-remove"><i class="fa fa-times-circle"></i></span>'),function r(e,t){-1==e.id.indexOf(c)&&t.find(".uploader-item-tip").append('<span class="uploader-item-progress"><span class="uploader-item-progress-percentage" style="width: 0;"></span></span>')}(t,i),i.data("file",t),i.data("identity",n),a.append(i);var o=this;i.find("a").click(function(){var e=l(this).parent(),t=(e.data("file"),g(e.data("identity")));if(o.onGetFile)return o.onGetFile(t)}),o.onAppendFile&&o.onAppendFile(t,n)}}function v(e){return WebUploader.formatSize(e)}function m(e){return l("#"+e.id).parent()}function b(e){var t=m(e);l(".uploader-item-progress",t).remove()}t.Uploader=function(e){(function a(e){e.container&&function i(n){var a=n.container,e=o.getIdentity(),t='<div class="uploader-picker">\t\t<a href="#" class="">\t\t\t<i class="fa fa-paperclip fa-rotate-90"></i> {buttonText}\t\t</a>\t</div>\t<div class="uploader-items">\t\t<ul>\t\t</ul>\t</div></div>';t=t.bformat(n),a.attr("id")||a.attr("id","uploader"+e);a.html(t),0==n.isEditable&&l(".uploader-picker",a).remove();n.items&&0<n.items.length&&l.each(n.items,function(e,t){t.id=c+t.identity,p.call(n,a,t,t.identity)})}(e)})(e=function i(e){var t=l.extend(!0,{container:null,button:null,swf:null,server:null,auto:!0,multiple:!0,fileSizeLimit:null,fileNumLimit:null,fileSingleSizeLimit:null,buttonText:d().uploadButtonDefaultText,onUploadFileQueued:null,onUploadSuccess:null,onUploadProgress:null,onUploadError:null,onUploadAccept:null,onUploadComplete:null,onError:null,onRemoveFile:null,onGetFile:null,onAppendFile:null,items:[],isEditable:!0,mode:1},{},e);return function n(e){h(e,"swf",null),h(e,"server",null)}(t),t}(e));var t,n=e.container;1==e.isEditable&&(t=function r(o,t){var i=function a(e){var t=l.extend(!0,{},{},e),n=t.container;t.pick=n?(t.dnd="#{0} > .uploader-picker".bformat(n.attr("id")),{id:l(".uploader-picker > a",n),multiple:e.multiple}):{id:e.button,multiple:e.multiple};return t.disableGlobalDnd=!0,t.onUploadFileQueued=null,t.onUploadSuccess=null,t.onUploadProgress=null,t.onUploadError=null,t.onUploadAccept=null,t.onUploadComplete=null,t.onError=null,t}(o),e=WebUploader.create(i);return e.on("error",function(e){switch(e){case"Q_EXCEED_NUM_LIMIT":u.call(o,d().errorMessage.Q_EXCEED_NUM_LIMIT.bformat(i.fileNumLimit),arguments);break;case"F_DUPLICATE":u.call(o,d().errorMessage.F_DUPLICATE,arguments);break;case"F_EXCEED_SIZE":var t=arguments[1],n=arguments[2];u.call(o,d().errorMessage.F_EXCEED_SIZE.bformat(n.name,v(t)),arguments);break;case"Q_EXCEED_SIZE_LIMIT":t=arguments[1],n=arguments[2],u.call(o,d().errorMessage.Q_EXCEED_SIZE_LIMIT.bformat(n.name,v(t)),arguments);break;case"Q_TYPE_DENIED":n=arguments[1];var a=l.map(i.accept,function(e){return"{0}[{1}]".bformat(e.title,e.extensions)}).join(",");u.call(o,d().errorMessage.Q_TYPE_DENIED.bformat(n.name,a),arguments);break;default:u.call(o,d().errorMessage.OTHER.bformat(e),arguments)}return!1}),e.on("uploadError",function(e,t){return f(o,e,t),!0}),e.on("fileQueued",function(e){return function a(e,t,n){e.onUploadFileQueued?e.onUploadFileQueued(n):p.call(e,t,n)}(o,t,e),!0}),e.on("filesQueued",function(e){return!0}),e.on("uploadSuccess",function(e,t){return 1==t.Flag?function r(e,t,n){var a=n.identity||n.id;if(e.onUploadSuccess){var i=e.onUploadSuccess(t,a,n);if(i)return}var o=m(t);o.data("identity",a),o.addClass("uploader-item-success").attr("title",d().uploadSuccessText),l(".uploader-item-tip",o).html("").attr("title",""),b(t)}(o,e,t):f(o,e,t.Message),!0}),e.on("fileDequeued",function(e){return m(e).remove(),!0}),e.on("uploadProgress",function(e,t){return function i(e,t,n){if(e.onUploadProgress)e.onUploadProgress(t,n);else{var a=m(t);n<=25?l(".uploader-item-progress-percentage",a).addClass(".uploader-item-progress-percentage-25"):n<=50?l(".uploader-item-progress-percentage",a).addClass(".uploader-item-progress-percentage-50"):n<=75?l(".uploader-item-progress-percentage",a).addClass(".uploader-item-progress-percentage-75"):100==n&&l(".uploader-item-progress-percentage",a).addClass(".uploader-item-progress-percentage-100")}}(o,e,t),!0}),e}(e,n)),function s(o,r){var e=o.container;if(!e)return;var t=l(".uploader-items > ul",e);0==o.isEditable&&l(".uploader-item-remove",t).remove();t.click(function(e){var t=l(e.target);if(t.parent().is(".uploader-item-remove")){var n=t.parent().parent(),a=n.data("file"),i=g(n.data("identity"));if(o.onRemoveFile&&0==o.onRemoveFile(i))return;-1==a.id.indexOf(c)&&r?r.removeFile(a,!0):m(a).remove()}})}(e,t),this.upload=function(){t.upload()},this.stop=function(){t.stop()}},t.Uploader.regional=[],t.Uploader.regional[""]=t.Uploader.regional["zh-CN"]={errorMessage:{Q_EXCEED_NUM_LIMIT:"上传超过了最大能上传的文件数量, 最多能上传{0}个.",F_DUPLICATE:"文件重复上传",F_EXCEED_SIZE:"文件[{0}]上传失败，单个文件超过了上传文件大小限制，最大只能上传: {1}",Q_EXCEED_SIZE_LIMIT:"文件[{0}]上传失败，所有文件总共大小超过了允许上传大小限制，最大只能上传: {1}",Q_TYPE_DENIED:"文件[{0}]上传失败，上传的文件格式不支持，只允许上传后缀名为: {1}",OTHER:"上传出错了, 原因类型：{0}"},uploadErrorTextFormat:"上传失败：{0}",uploadFailText:"[失败]",uploadSuccessText:"上传成功",uploadProgressText:"上传中，当前进度: {0}%",uploadButtonDefaultText:"上传",uploadWarningTitle:"上传文件警告"},t.Uploader.create=function(e){return new t.Uploader(e)}}(jQuery,Beyondbit),function(n,e){var t=Beyondbit.registerNameSpace("Controls"),a=t;t.val=function(e,t){if(e)return t||"string"==n.type(t)?(e.is("div,span")?e.html(t):e.val(t),e):e.is("div,span")?e.html():e.val()},t.makeText={get:function(){return(a.val(this.options.selectTextToControl)||"").splitRemoveEmptys(this.options.splitChar,null,!0)},set:function(e){this.options.selectTextToControl&&a.val(this.options.selectTextToControl,e.name||e.text)}},t.makeValue={get:function(){return(a.val(this.options.selectValueToControl||this.options.target)||"").splitRemoveEmptys(this.options.splitChar,null,!0)},set:function(e){a.val(this.options.target,e.value),this.options.selectValueToControl&&a.val(this.options.selectValueToControl,e.value)}}}(jQuery);
//# sourceMappingURL=beyondbit-4.0.0.min.js.map